{"version":3,"file":"utils.js","sourceRoot":"","sources":["../scripts/utils.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Copyright 2020 Huawei Technologies Co., Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {exec} from 'cordova';\n\ninitHms();\n\n//\n// Exports\n//\n\nexport function asyncExec(clazz: string, func: string, args: any[]=[]): Promise<any> {\n    return new Promise((resolve, reject) => {\n        exec(resolve, reject, clazz, func, args);\n    });\n}\n\n//\n// Helpers/Event system\n//\n\ntype Handler = (data: any) => void;\n\ndeclare global {\n    interface Window {\n        hmsEventHandlers: {\n            [key: string]: Handler[]\n        },\n        hmsEventHandler: (eventName: string, data: any) => void,\n        registerHMSEvent: (eventName: string, handler: Handler) => void\n        unregisterHMSEvent: (eventName: string, handler: Handler) => void\n        hmsSetConstants: (objName: string, constans: any) => void,\n        [key: string]: any\n    }\n}\n\nfunction initHms() {\n    console.log('hms :: init called.');\n    initEventHandler();\n    initConstantSetter();\n}\n\nfunction initEventHandler() {\n    if (window.hmsEventHandler != null) {\n        return;\n    }\n\n    console.log('hms-location :: window.hmsEventHandler');\n    window.hmsEventHandlers = {};\n\n    window.hmsEventHandler = (eventName, data) => {\n        console.log('eventReceived: ' + eventName + ' with data: ', data);\n        if (window.hmsEventHandlers.hasOwnProperty(eventName)) {\n            window.hmsEventHandlers[eventName].forEach((handler: Handler) => {\n                handler(data);\n            });\n        }\n    };\n\n    window.registerHMSEvent = (eventName, handler) => {\n        if (window.hmsEventHandlers.hasOwnProperty(eventName)) {\n            window.hmsEventHandlers[eventName].push(handler);\n        } else {\n            window.hmsEventHandlers[eventName] = [handler];\n        }\n    };\n\n    window.unregisterHMSEvent = (eventName, handler) => {\n        if (window.hmsEventHandlers.hasOwnProperty(eventName)) {\n            const idx = window.hmsEventHandlers[eventName].indexOf(handler);\n            if (idx > -1) {\n                window.hmsEventHandlers[eventName].splice(idx, 1);\n            }\n        }\n    };\n}\n\nfunction initConstantSetter() {\n    if (window.hmsSetConstants != null) {\n        return;\n    }\n\n    console.log('hms-location :: window.hmsSetConstants');\n    window.hmsSetConstants = (objName: string, constants) => {\n        console.log('hms-location :: initializing constants for', objName, 'with', constants);\n\n        if (window[objName] == null) {\n            console.log('hms-location :: uninitialized obj');\n            return;\n        }\n\n        Object.keys(constants).forEach(key => {\n            Object.defineProperty(window[objName], key, {value: constants[key]});\n        });\n    };\n}\n"]}